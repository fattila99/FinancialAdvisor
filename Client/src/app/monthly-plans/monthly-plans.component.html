<div class="table-container" *ngIf="monthlyPlans && monthlyPlans.length; else noPlansTemplate">
  <table mat-table [dataSource]="monthlyPlans">
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Plan name</th>
      <td mat-cell *matCellDef="let element">{{element.email}}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>limit</th>
      <td mat-cell *matCellDef="let element">{{element.name}}</td>
    </ng-container>


    <ng-container matColumnDef="delete">
      <th mat-header-cell *matHeaderCellDef>Delete</th>
      <td mat-cell *matCellDef="let element; let i = index"><mat-icon fontIcon="delete" (click)="deletePlan(element._id, i)"></mat-icon></td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columns"></tr>
    <tr mat-row *matRowDef="let row; columns: columns"></tr>
  </table>
</div>

<ng-template #noPlansTemplate>
  <p>No plans available.</p>
</ng-template>

<div class="add-item-section">
  <h3>Add New Item</h3>
  <form (ngSubmit)="addPlan()">
    <mat-form-field appearance="fill">
      <mat-label>Plan Name</mat-label>
      <input matInput [(ngModel)]="newPlan.name" name="name" required />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Amount</mat-label>
      <input matInput type="number" [(ngModel)]="newPlan.limit" name="limit" required />
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit">Add Item</button>
  </form>
</div>
